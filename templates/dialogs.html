		<div id="delete-confirm" class="dialog" title="Delete commitment?" data-role="dialog">   
			<div data-role="content" id="text">
				<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><h4>Deleting commitments cannot be undone. Are you sure?</h4></p>
			</div>
		</div>
		
		<div id="add-commitment" class="dialog" title="Record New Commitment" data-role="dialog">
			<form class='form-horizontal' id='comm_form'>
			
				<div class="control-group">
					<label class="control-label" for="inp-comm">Description</label>
					<div class="controls">
						<textarea class="form-control input-sm" id="inp-comm" name="description" placeholder="Describe what work products will be given to whom, in what form, by what method & at what level of completion." rows="5"></textarea>
					</div>
				</div>

				<div class="control-group">
					<label class="control-label" for="inp-req">Requester</label>
					<div class="controls">
						<select class="input-sm" id="inp-req" name="requester" style="width: 200px">
						</select>
					</div>
				</div>
				
				<div class="control-group">
					<label class="control-label" for="inp-prom">Promiser</label>
					<div class="controls">
						<select class="input-sm" id="inp-prom" name="promiser" style="width: 200px">
						</select>
					</div>
					<p class="form-control-static">If promiser = requester, this will be considered a personal workplan item.</p>
				</div>
				
				<div class="control-group">
					<label class="control-label" for="inp-due">Date Due</label>
					<div class="controls">
						<input type="text" class="input-sm" id="inp-due" name="date_due" style="width: 200px">
					</div>
				</div>
				
				<div class="control-group">
					<label class="control-label" for="inp-stat">Status</label>
					<div class="controls">
						<select class="input-sm" id="inp-stat" name="status" style="width: 200px">
							<option value="open-high">"open: high priority"</option>
							<option value="open" selected>"open"</option>
							<option value="open-low">"open: low priority"</option>
							<option value="closed">"closed"</option>
							<option value="in progress">"in progress"</option>
							<option value="deferred">"deferred"</option>
							<option value="unknown">"unknown"</option>
						</select>
					</div>
				</div>
			</form>			
		</div>
<script type="text/javascript">
	$(document).ready(function() {
	
	console.log("this code executed");
		$.ajax({
			url: '../includes/load_project_usernames.php',
			type: 'POST',
			dataType: 'JSON',
			data: { p: pnum },
			success: function (proj_users) {
				populate_select_obj("#inp-req", proj_users);
				populate_select_obj("#inp-prom", proj_users);
				},
			error: function(XMLHttpRequest, textStatus, exception) { 
				alert("Ajax FAIL!\n" + "\nTextstatus: " + textStatus + "\nException: " + exception);},
			async: true
		});
		
		$("#delete-confirm").dialog({
			resizable: false,
			autoOpen: false,
			height:180,
			modal: true,
			buttons: {
				"Delete": function() {
					$(this).dialog("close");
					project_commitments.DeleteRow($(this).data('id'));
				},
				Cancel: function() {
					$(this).dialog("close");
				}
			}
		});
		
		$("#add-commitment").dialog({
			resizable: true,
			autoOpen: false,
			height:450,
			width:300,
			modal: true,
			buttons: {
				"Submit": function() {
					var data = {};
					$.each($('#comm_form').serializeArray(), function(i, field) {
						data[field.name] = field.value;
					});
					$(this).dialog("close");
					project_commitments.AddRow(data);
				},
				"Submit+": function() {
					var data = {};
					$.each($('#comm_form').serializeArray(), function(i, field) {
						data[field.name] = field.value;
					});
					project_commitments.AddRow(data);
					$(this).dialog("close").delay(700).dialog("open");
				},
				Cancel: function() {
					$(this).dialog("close");
				}
			}
		});
		
		$("#new_com_btn").on("click", function() {
			$("#add-commitment")
				.dialog({show: { effect: "puff", duration: 300 }})
				.dialog("open"); 
		});
		
		$("#inp-due").datepicker({
			dateFormat: $.datepicker.W3C,
			numberOfMonths: 2,
			gotoCurrent: true,
			showAnim: 'puff'
		});

		$("#inp-req").selectmenu();
		$("#inp-prom").selectmenu();
		$("#inp-stat").selectmenu();
	});
</script>