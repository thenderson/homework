	<body>
		<div class="container-fluid wrap">	
			<div><h3><strong>YOUR CURRENT COMMITMENTS</strong></h3></div>
			<div id="user_commitments"></div>
			<div id="user_commitments_paginator"></div>
		</div>
			<br>
		<div class="container-fluid wrap">
			<div class="col-sm-6 nopadding">
				<div><h3><strong>YOUR PROJECTS</strong></h3></div>
				<div id="user_projects"></div>
				<div id="user_projects_paginator"></div>
			</div>

			<div class="col-sm-6 nopadding">
				<div><h3><strong>ALL PROJECTS</strong></h3></div>
				<div id="all_projects"></div>
				<div id="all_projects_paginator"></div>
			</div>
		</div>
			
			<script src="js/editablegrid-2.1.0-b13.js"></script>
			<script src="js/editablegrid_renderers.js" ></script>
			<script src="js/editablegrid_editors.js" ></script>
			<script src="js/editablegrid_validators.js" ></script>
			<script src="js/editablegrid_utils.js" ></script>
			<script src="js/editablegrid_charts.js" ></script>
			<script src="js/reliable.js" ></script>		

	</body>
	
	<script type="text/javascript">
		window.onload = function() { 
		
			// pass to project-specific page
			goto_project_view = function (p_num) {
			}
			
			// load commitments belonging to current user
			user_comm_grid = new EditableGrid("UserCommitments", {
				enableSort: true,
				dateFormat: "US",
				pageSize: 5,
				tableRendered:  function() { updatePaginator(this, "user_commitments_paginator"); },
				tableLoaded: function() { this.renderGrid('user_commitments', 'table', 'commitments'); },
				modelChanged: function(rowIndex, columnIndex, oldValue, newValue, row) {
					updateCellValue(this, rowIndex, columnIndex, oldValue, newValue, row);
				}});
			
			$.ajax({
				url: '../includes/load_user_commitments.php',
				type: 'POST',
				dataType: "text",
				data: {
					horizon: 30
				},
				success: function (response) 
				{ //process response as xml, then call tableLoaded
					user_comm_grid.loadXMLFromString(response); //synchronous function
					user_comm_grid.tableLoaded();
				},
				error: function(XMLHttpRequest, textStatus, exception) 
				{ 
					alert("Ajax FAIL!\n" + "\nTextstatus: " + textStatus + "\nException: " + exception); 
				},
				async: true
			});
			
			user_proj_grid = new EditableGrid("UserProjects", {
				enableSort: true,
				dateFormat: "US",
				pageSize: 5,
				tableRendered:  function() { updatePaginator(this, "user_projects_paginator"); },
				tableLoaded: function() { 
					user_proj_grid.setCellRenderer('project_number', new CellRenderer({ 
						render: function(cell, value) { 
							cell.innerHTML+= value+"<a onclick=\"goto_project_view("+value+");\"></a>";
						}
					}));
					this.renderGrid('user_projects', 'table', 'projects'); }
				}); 
				
			user_proj_grid.loadXML("../includes/load_user_projects.php");

			all_proj_grid = new EditableGrid("AllProjects", {
				enableSort: true,
				dateFormat: "US",
				pageSize: 5,
				tableRendered:  function() { updatePaginator(this, "all_projects_paginator"); },
				tableLoaded: function() { this.renderGrid("all_projects", 'table', 'projects'); },
			});

			all_proj_grid.loadXML("../includes/load_all_projects.php");			
			
		}; 
	</script>